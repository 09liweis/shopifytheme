{% comment %}
  Renders a compare product

  Accepts:
  - compare_product: {Object} Product Liquid object (optional)

  Usage:
  {% render 'card-product', show_vendor: section.settings.show_vendor %}
{% endcomment %}
{%- if compare_product != blank -%}
  <div class="compare-product">
    <div class="compare-product__image-wrapper">
      {%- if compare_product.featured_image -%}
        <img
          srcset="{%- if compare_product.featured_image.width >= 165 -%}{{ compare_product.featured_image | image_url: width: 165 }} 165w,{%- endif -%}
            {%- if compare_product.featured_image.width >= 360 -%}{{ compare_product.featured_image | image_url: width: 360 }} 360w,{%- endif -%}
            {%- if compare_product.featured_image.width >= 533 -%}{{ compare_product.featured_image | image_url: width: 533 }} 533w,{%- endif -%}
            {%- if compare_product.featured_image.width >= 720 -%}{{ compare_product.featured_image | image_url: width: 720 }} 720w,{%- endif -%}
            {%- if compare_product.featured_image.width >= 940 -%}{{ compare_product.featured_image | image_url: width: 940 }} 940w,{%- endif -%}
            {%- if compare_product.featured_image.width >= 1066 -%}{{ compare_product.featured_image | image_url: width: 1066 }} 1066w{%- endif -%}"
          src="{{ compare_product.featured_image | image_url: width: 533 }}"
          sizes="(min-width: 1100px) 535px, (min-width: 750px) calc((100vw - 130px) / 2), calc((100vw - 50px) / 2)"
          alt="{{ compare_product.featured_image.alt | escape }}"
          loading="lazy"
          width="{{ compare_product.featured_image.width }}"
          height="{{ compare_product.featured_image.height }}"
        >
      {%- endif -%}

      {%- if compare_product.tags contains 'Best Seller' -%}
        <div class="compare-product__tag best-seller">Best Seller</div>
      {%- endif -%}
      {%- if compare_product.tags contains 'Popular' -%}
        <div class="compare-product__tag popular">Popular Upgrade</div>
      {%- endif -%}
    </div>

    <div class="compare-product__content">
      <h3 class="compare-product__title">{{ compare_product.title }}</h3>
      {%- if compare_product.metafields.custom.comfort_level != blank -%}
        <p class="compare-product__description">{{ compare_product.metafields.custom.comfort_level }}</p>
      {%- endif -%}

      <div class="compare-product__price-wrapper">
        {%- if true -%}
          <span class="compare-product__price-label">from</span>
          <span class="compare-product__price">
            {{- compare_product.selected_or_first_available_variant.price | money_with_currency -}}
          </span>
        {%- endif -%}
      </div>

      <a href="{{ compare_product.url }}" class="button button--primary">
        Shop Now
      </a>
    </div>
  </div>
{%- endif -%}
